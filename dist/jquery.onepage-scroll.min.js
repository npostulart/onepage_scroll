(function(){"use strict";var a;a=function(a){var b;return b=function(a){return""!==a&&!isNaN(a)&&Math.round(a)===a},a.fn.stripClass=function(a,b){var c;return c=new RegExp((b?"\\S+":"\\b")+a+"\\S*","g"),this.attr("class",function(a,b){return b?b.replace(c,""):void 0}),this},a.onepage_scroll=function(c,d){var e,f;return this.settings={},this.$element=a(c),this.state="",this.eventState="",this.quietPeriod=500,f=function(){var a,b;return a=document.body||document.documentElement,b=a.style,void 0!==b.transitions||void 0!==b.WebkitTransition},e=function(){var a,b,c,d,e,f,g,h;if(b="Webkit Moz O ms".split(" "),c="transform",e=document.body||document.documentElement,f=e.style,d=void 0!==f[c],!d)for(c=c.charAt(0).toUpperCase()+c.slice(1),g=0,h=b.length;h>g;g++)if(a=b[g],void 0!==f[a+c])return!0;return d},this.transformPage=function(b,c){var d,e=this;return c="function"!=typeof c?a.noop:c,d=100*(b-1)*-1,this.supportTransition&&this.supportTransform?(this.$element.css({"-ms-transform":"translate(0, "+d+"%)","-ms-transition":"all "+this.settings.animationTime+"ms "+this.settings.easing,"-webkit-transform":"translate(0, "+d+"%)","-webkit-transition":"all "+this.settings.animationTime+"ms "+this.settings.easing,transform:"translate(0, "+d+"%)",transition:"all "+this.settings.animationTime+"ms "+this.settings.easing}),this.$element.one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){return e.settings.afterMove(b),c(b)})):this.$element.animate({top:""+d+"%"},function(){return e.settings.afterMove(b),c(b)}),this},this.moveDown=function(){var b;return b=a(""+this.settings.sectionContainer+".active").data("index"),this.moveTo(b+1)},this.moveUp=function(){var b;return b=a(""+this.settings.sectionContainer+".active").data("index"),this.moveTo(b-1)},this.moveTo=function(c){var d,e,f,g,h,i=this;if(d=a(""+this.settings.sectionContainer+".active"),e=d.data("index"),!b(c)){if(h=this.$element.find(c),1!==h.length)return;if(c=h.data("index"),!b(c))return}if(c!==e){if(f=c,this.settings.smooth&&Math.abs(e-c)>1&&(f=c>e?e+1:e-1),1>f||f>this.total){if(!this.settings.loop)return;f=1>f?this.total:1}return g=a(""+this.settings.sectionContainer+"[data-index='"+f+"']"),this.settings.beforeMove(d.data("index")),d.removeClass("active"),g.addClass("active"),this.settings.pagination&&(a(".onepage-pagination li a.active").removeClass("active"),a(".onepage-pagination li a[data-index='"+f+"']").addClass("active")),a("body").removeClass("viewing-page-"+d.data("index")).addClass("viewing-page-"+g.data("index")),this.settings.updateURL&&this.updateHistory(f),this.settings.smooth&&c!==f?this.transformPage(f,function(){return i.moveTo(c)}):this.transformPage(f),this}},this.updateHistory=function(a){var b;return history.replaceState&&(b=window.location.href.substr(0,""+window.location.href.indexOf("#")+"#"+a),history.pushState({},document.title,b)),this},this.bindEvents=function(){return"binded"!==this.eventState&&"created"===this.state?(this.bindScrollEvents(),this.bindSwipeEvents(),this.settings.keyboard&&this.bindKeyEvents(),this.eventState="binded",this):void 0},this.unbindEvents=function(){return"binded"===this.eventState?(this.unbindScrollEvents(),this.unbindSwipeEvents(),this.settings.keyboard&&this.unbindKeyEvents(),this.eventState="unbinded",this):void 0},this.bindScrollEvents=function(){var b=this;return a(document).bind("mousewheel.onepage DOMMouseScroll.onepage",function(a){var c;return a.preventDefault(),c=a.originalEvent.wheelDelta||-a.originalEvent.detail,b.init_scroll(a,c)}),this},this.unbindScrollEvents=function(){return a(document).unbind("mousewheel.onepage DOMMouseScroll.onepage"),this},this.bindSwipeEvents=function(){var a,b=this;return a=this.$element.hammer(),this.$element.hammer().on("swipedown.onepage",function(a){return a.preventDefault(),a.gesture.preventDefault(),b.moveUp()}).on("swipeup.onepage",function(a){return a.preventDefault(),a.gesture.preventDefault(),b.moveDown()}),this},this.unbindSwipeEvents=function(){var a;return a=this.$element.hammer(),a.off("swipedown.onepage"),a.off("swipeup.onepage"),this},this.bindKeyEvents=function(){var b=this;return a(document).on("keydown.onepage",function(a){var c;if(c=a.target.nodeName,"INPUT"!==c&&"TEXTAREA"!==c){switch(a.which){case 33:case 38:b.moveUp();break;case 34:case 40:b.moveDown();break;case 36:b.moveTo(1);break;case 35:b.moveTo(b.total);break;default:return}return a.preventDefault()}}),this},this.unbindKeyEvents=function(){return a(document).off("keydown.onepage"),this},this.viewportTooSmall=function(){return this.settings.responsiveFallbackWidth!==!1&&a(window).width()<this.settings.responsiveFallbackWidth?!0:this.settings.responsiveFallbackHeight!==!1&&a(window).height()<this.settings.responsiveFallbackHeight?!0:!1},this.watchResponsive=function(){return this.viewportTooSmall()?"created"===this.state&&this.destroy():"created"!==this.state&&this.create(),this},this.init_scroll=function(a,b){var c,d;return c=b,d=(new Date).getTime(),d-this.lastAnimation<this.quietPeriod+this.settings.animationTime?(a.preventDefault(),void 0):(0>c?this.moveDown():this.moveUp(),this.lastAnimation=d,this)},this.bindPagination=function(){var b=this;return a(".onepage-pagination").on("click.onepage","li a",function(c){var d;return d=a(c.currentTarget).data("index"),b.moveTo(d)}),this},this.createSections=function(){var b,c=this;return b=0,a.each(this.sections,function(d,e){return a(e).addClass("section").attr("data-index",d+1).css({position:"absolute",top:""+b+"%"}),b+=100,c.settings.pagination?c.paginationList+="<li><a data-index='"+(d+1)+"' href='#"+(d+1)+"'></a></li>":void 0}),this},this.destroySections=function(){return this.sections.removeClass("section active").removeAttr("data-index style"),this},this.destroy=function(){return"created"===this.state&&(this.settings.beforeDestroy(),a("html, body").removeClass("onepage-scroll-enabled"),a("body").stripClass("viewing-page-"),this.$element.removeClass("onepage-wrapper").removeAttr("style"),this.destroySections(),this.settings.pagination&&(a("ul.onepage-pagination").off("click.onepage","li a"),a("ul.onepage-pagination").remove()),this.unbindEvents(),this.state="destroyed",this.settings.afterDestroy()),this},this.create=function(){var b,c;if("created"!==this.state){if(this.viewportTooSmall())return;this.settings.beforeCreate(),this.sections=a(this.settings.sectionContainer),this.total=this.sections.length,this.lastAnimation=0,this.paginationList="",a("html, body").addClass("onepage-scroll-enabled"),this.$element.addClass("onepage-wrapper").css("position","relative"),this.createSections(),this.settings.pagination&&(a("<ul class='onepage-pagination'>"+this.paginationList+"</ul>").prependTo("body"),c=a(".onepage-pagination").height()/2*-1,a(".onepage-pagination").css("margin-top",c),this.bindPagination()),this.reset(),this.settings.updateURL&&""!==window.location.hash&&"#1"!==window.location.hash&&(b=window.location.hash.replace("#",""),this.moveTo(b)),this.state="created",this.bindEvents(),this.settings.afterCreate()}return this},this.reset=function(){return a(""+this.settings.sectionContainer+"[data-index='1']").addClass("active"),a("body").addClass("viewing-page-1"),this.settings.pagination&&a(".onepage-pagination li a[data-index='1']").addClass("active"),a(window).scrollTop(0)},this.init=function(){var b=this;return this.settings=a.extend({},this.defaults,d),this.supportTransition=f(),this.supportTransform=e(),(this.settings.responsiveFallbackWidth!==!1||this.settings.responsiveFallbackHeight!==!1)&&a(window).on("resize.onepage",function(){return b.watchResponsive()}),this.create(),this},this.init(),this},a.onepage_scroll.prototype.defaults={sectionContainer:"section",easing:"ease",animationTime:1e3,pagination:!0,keyboard:!1,updateURL:!1,beforeMove:a.noop,afterMove:a.noop,loop:!1,responsiveFallbackWidth:!1,responsiveFallbackHeight:!1,smooth:!1,beforeCreate:a.noop,afterCreate:a.noop,beforeDestroy:a.noop,afterDestroy:a.noop},a.fn.onepage_scroll=function(b){return this.each(function(){var c;return void 0===a(this).data("onepage_scroll")?(c=new a.onepage_scroll(this,b),a(this).data("onepage_scroll",c)):void 0}),1===this.length&&void 0!==a(this).data("onepage_scroll")?a(this).data("onepage_scroll"):void 0},a.fn.onepage_scroll},"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}).call(this);